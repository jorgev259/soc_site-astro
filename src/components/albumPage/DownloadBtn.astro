---
import Image from 'astro/components/Image.astro'

interface Props {
  href: string | null
  alt?: string
  icon?: ImageMetadata
  direct?: boolean
}
const { href, alt, icon, direct = false } = Astro.props
const { permissions } = Astro.locals
const disabled = direct && !permissions.includes('SKIP_ADS')
---

<a
  class:list={[
    'flex-1 rounded-md bg-btn-gray hover:bg-dark border-none border-2 border-link hover:border-solid flex justify-center items-center uppercase',
    { 'border-gold hover:text-gold ': direct, 'bg-btn-disabled text-btn-gray': disabled }
  ]}
  target='_blank'
  href={href}
>
  {icon ? <Image class='rounded' width={20} height={20} alt={alt ?? ''} src={icon} /> : null}
  <slot />
</a>
